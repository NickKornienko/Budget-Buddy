[[extend 'layout.html']]

<style>
   [v-cloak] {
      display: none;
   }
</style>


<div class="section" id="vue-target" v-cloak>

   <a class="button is-success" href="[[=URL('create', signer=url_signer)]]">
      <span class="icon"><i class="fa fa-plus"></i></span>
      <span>Create new budget</span>
   </a>

   <table class="table is-striped is-fullwidth">
      <tr>
         <th>Budget name</th>
      </tr>
      [[for row in rows:]]
      <tr>
         <td>[[=row.name]]</td>
         <td>
            <a class="button" href="[[=URL('edit', row.id, signer=url_signer)]]">
               <span class="icon"><i class="fa fa-fw fa-pencil"></i></span> <span>Edit</span>
            </a>
         </td>
         <td>
            <a class="button" href="[[=URL('delete', row.id, signer=url_signer)]]">
               <span class="icon"><i class="fa fa-fw fa-trash"></i></span>
            </a>
         </td>
      </tr>
      [[pass]]
   </table>
</div>


[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
   let my_callback_url = "[[=XML(my_callback_url)]]";
</script>
<script src="js/index.js"></script>
[[end]]